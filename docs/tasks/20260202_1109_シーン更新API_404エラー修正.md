# シーン更新API 404エラー修正

## 目的

開発者がシーンの手動編集機能を正常に使えるようにするため。

現在、フロントエンドからシーン更新APIを呼び出すと404エラーが発生し、シーンの編集ができない状態になっている。

## エラー内容

```
PATCH /api/shorts-gen/projects/:projectId/scenes/:sceneId → 404 Not Found
```

## 原因調査結果

Next.jsルートハンドラーのプロキシ先URLが、バックエンドのエンドポイントと一致していない。

### URLパスの不一致

| コンポーネント | パス |
|---------------|------|
| フロントエンド呼び出し | `/api/shorts-gen/projects/:projectId/scenes/:sceneId` |
| Next.jsプロキシ先 | `/api/shorts-gen/projects/:projectId/scenes/:sceneId` |
| **バックエンド実装** | `/api/shorts-gen/projects/:projectId/script/scenes/:sceneId` |

Next.jsルートハンドラーがバックエンドにプロキシする際、パスに `/script/` を含めていないことが原因。

### 関連ファイル

- バックエンドエンドポイント: [apps/backend/src/contexts/shorts-gen/presentation/routes/script.routes.ts:431](apps/backend/src/contexts/shorts-gen/presentation/routes/script.routes.ts#L431)
- Next.jsプロキシ: [apps/webapp/src/app/api/shorts-gen/projects/[projectId]/scenes/[sceneId]/route.ts:19](apps/webapp/src/app/api/shorts-gen/projects/[projectId]/scenes/[sceneId]/route.ts#L19)
- フロントエンド呼び出し: [apps/webapp/src/app/shorts-gen/[projectId]/project-detail-client.tsx:247](apps/webapp/src/app/shorts-gen/[projectId]/project-detail-client.tsx#L247)

## 修正方針

Next.jsルートハンドラーのプロキシ先URLを修正する。

### 修正理由

- バックエンドのルーティングは `script.routes.ts` で管理されており、`/:projectId/script/scenes/:sceneId` というパスパターンで統一されている
- フロントエンドのプロキシ先を合わせることで、バックエンドの変更は不要になる
- 影響範囲が最小限

### 修正内容

**対象ファイル**: `apps/webapp/src/app/api/shorts-gen/projects/[projectId]/scenes/[sceneId]/route.ts`

**修正箇所**: 19行目のプロキシ先URL

```
変更前: /api/shorts-gen/projects/${projectId}/scenes/${sceneId}
変更後: /api/shorts-gen/projects/${projectId}/script/scenes/${sceneId}
```

## テスト方法

1. フロントエンドでシーン編集画面を開く
2. シーンの内容（summary, voiceText等）を編集して保存
3. 404エラーが発生せず、正常に保存されることを確認
