# ローカル開発時のログ整形機能

## 目的

開発者がローカル開発時にJSON形式のログを読みづらいと感じる状態を解消するため。

## 背景

現在、`GcpLogger` は本番環境向けにCloud Logging互換のJSON形式でログを出力している。
ローカル開発時もこのJSON形式のまま出力されるため、ターミナル上で視認性が悪い。

```
apps/backend dev: {"severity":"INFO","message":"[SynthesizeVoiceUseCase] Starting voice synthesis","timestamp":"2026-01-31T03:44:05.146Z","context":{"scriptId":"989f6543-4881-4e95-99bf-851e5f02755d","sceneIds":["617a1b7d-7a3d-41e2-914e-11cd5166303e"]}}
```

## 設計

### 変更対象

- `apps/backend/src/contexts/shared/infrastructure/logging/logger.ts`

### 方針

既存の `isProduction` フラグを活用し、`NODE_ENV !== 'production'` の場合は人間可読な形式で出力する。

### 出力フォーマット

**開発環境（NODE_ENV !== 'production'）:**

```
[INFO] [SynthesizeVoiceUseCase] Starting voice synthesis {"scriptId":"989f6543...","sceneIds":["617a1b7d..."]}
```

- severity に応じた ANSI カラーコードを付与
- context はインラインでJSON表示（省略可能）

**本番環境（NODE_ENV === 'production'）:**

現行のJSON形式を維持（変更なし）

### カラースキーム

| Severity | Color | ANSI Code |
|----------|-------|-----------|
| DEBUG | Gray | `\x1b[90m` |
| INFO | Cyan | `\x1b[36m` |
| WARNING | Yellow | `\x1b[33m` |
| ERROR | Red | `\x1b[31m` |
| CRITICAL | Magenta | `\x1b[35m` |

### 実装箇所

`GcpLogger.log()` メソッドの出力部分（65行目付近）を分岐させる:

1. `formatForDevelopment()` メソッドを追加
2. `getColorCode()` メソッドを追加
3. `log()` メソッド内で `isProduction` に応じて出力形式を切り替え

## 影響範囲

- `GcpLogger` クラスのみ
- 外部インターフェース（`Logger` 型、`createLogger` 関数）に変更なし
- 既存のログ呼び出し箇所への影響なし
